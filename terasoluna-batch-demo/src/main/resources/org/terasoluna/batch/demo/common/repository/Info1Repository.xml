<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
	namespace="org.terasoluna.batch.demo.common.repository.Info1Repository">

	<select id="cursor"
		resultType="org.terasoluna.batch.demo.common.dto.Info1Dto">
		SELECT
			id,
			type,
			status,
			point,
			create_date,
			update_date,
			delete_flg
		FROM
			info1
		ORDER BY
			id ASC
	</select>

	<update id="updatePointAndStatus"
		parameterType="org.terasoluna.batch.demo.common.dto.Info1Dto">
		UPDATE
			info1
		SET
			status = #{status},
			point = #{point},
			update_date = CURRENT_TIMESTAMP
		WHERE
			id = #{id}
	</update>

	<delete id="delete"
		parameterType="org.terasoluna.batch.demo.common.dto.Info1Dto">
		UPDATE
			info1
		SET
			delete_flg = 1,
			update_date = CURRENT_TIMESTAMP
		WHERE
			id = #{id}
	</delete>
</mapper>